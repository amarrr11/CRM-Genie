(this["webpackJsonpcrm-client"]=this["webpackJsonpcrm-client"]||[]).push([[0],{14:function(e,s,t){},22:function(e,s,t){},24:function(e,s,t){},29:function(e,s,t){},30:function(e,s,t){"use strict";t.r(s);var c=t(0),a=t.n(c),r=t(15),n=t.n(r),l=(t(14),t(16)),i=t(4),d=t(31),j=(t(22),t(1));var o=()=>Object(j.jsx)("div",{className:"login-container",children:Object(j.jsxs)("div",{className:"login-card",children:[Object(j.jsxs)("div",{className:"login-header",children:[Object(j.jsx)("h1",{children:"AI-Powered CRM"}),Object(j.jsx)("p",{children:"Welcome to your intelligent customer management system"})]}),Object(j.jsxs)("div",{className:"login-content",children:[Object(j.jsxs)("div",{className:"feature-list",children:[Object(j.jsxs)("div",{className:"feature-item",children:[Object(j.jsx)("span",{className:"feature-icon",children:"\ud83e\udd16"}),Object(j.jsx)("span",{children:"AI-Powered Analytics"})]}),Object(j.jsxs)("div",{className:"feature-item",children:[Object(j.jsx)("span",{className:"feature-icon",children:"\ud83d\udcca"}),Object(j.jsx)("span",{children:"Smart Campaign Management"})]}),Object(j.jsxs)("div",{className:"feature-item",children:[Object(j.jsx)("span",{className:"feature-icon",children:"\ud83d\udce7"}),Object(j.jsx)("span",{children:"Automated Email Marketing"})]}),Object(j.jsxs)("div",{className:"feature-item",children:[Object(j.jsx)("span",{className:"feature-icon",children:"\ud83d\udcc8"}),Object(j.jsx)("span",{children:"Customer Insights"})]})]}),Object(j.jsxs)("button",{className:"google-login-btn",onClick:()=>{window.location.href="/auth/google"},children:[Object(j.jsxs)("svg",{className:"google-icon",viewBox:"0 0 24 24",children:[Object(j.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),Object(j.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),Object(j.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),Object(j.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),Object(j.jsx)("div",{className:"security-note",children:Object(j.jsx)("p",{children:"\ud83d\udd12 Secure authentication powered by Google OAuth"})})]})]})});t(24);var b=e=>{let{user:s,onLogout:t}=e;const[a,r]=Object(c.useState)([]),[n,l]=Object(c.useState)(""),[i,o]=Object(c.useState)(!1);Object(c.useEffect)(()=>{b()},[]);const b=async()=>{try{const e=await d.a.get("/api/orders");r(e.data)}catch(e){console.error("Error fetching orders:",e)}};return Object(j.jsxs)("div",{className:"dashboard",children:[Object(j.jsx)("header",{className:"dashboard-header",children:Object(j.jsxs)("div",{className:"header-content",children:[Object(j.jsxs)("div",{className:"user-info",children:[Object(j.jsxs)("h1",{children:["Welcome, ",s.name,"!"]}),Object(j.jsx)("p",{children:"Customer Dashboard"})]}),Object(j.jsx)("button",{className:"logout-btn",onClick:t,children:"Logout"})]})}),Object(j.jsxs)("div",{className:"dashboard-content",children:[Object(j.jsxs)("div",{className:"stats-grid",children:[Object(j.jsxs)("div",{className:"stat-card",children:[Object(j.jsx)("div",{className:"stat-icon",children:"\ud83d\udcb0"}),Object(j.jsxs)("div",{className:"stat-info",children:[Object(j.jsx)("h3",{children:"Total Spent"}),Object(j.jsxs)("p",{className:"stat-value",children:["\u20b9",s.total_spend||0]})]})]}),Object(j.jsxs)("div",{className:"stat-card",children:[Object(j.jsx)("div",{className:"stat-icon",children:"\ud83d\udd04"}),Object(j.jsxs)("div",{className:"stat-info",children:[Object(j.jsx)("h3",{children:"Total Visits"}),Object(j.jsx)("p",{className:"stat-value",children:s.visits||0})]})]}),Object(j.jsxs)("div",{className:"stat-card",children:[Object(j.jsx)("div",{className:"stat-icon",children:"\ud83d\udce6"}),Object(j.jsxs)("div",{className:"stat-info",children:[Object(j.jsx)("h3",{children:"Total Orders"}),Object(j.jsx)("p",{className:"stat-value",children:a.length})]})]})]}),Object(j.jsxs)("div",{className:"main-content",children:[Object(j.jsxs)("div",{className:"create-order-section",children:[Object(j.jsx)("h2",{children:"Create New Order"}),Object(j.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!n||n<=0)alert("Please enter a valid amount");else{o(!0);try{await d.a.post("/api/orders",{spend:parseFloat(n)}),l(""),b(),alert("Order created successfully!")}catch(s){console.error("Error creating order:",s),alert("Failed to create order")}o(!1)}},className:"order-form",children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"amount",children:"Order Amount (\u20b9)"}),Object(j.jsx)("input",{type:"number",id:"amount",value:n,onChange:e=>l(e.target.value),placeholder:"Enter amount",min:"0",step:"0.01",required:!0})]}),Object(j.jsx)("button",{type:"submit",disabled:i,className:"create-order-btn",children:i?"Creating...":"Create Order"})]})]}),Object(j.jsxs)("div",{className:"orders-section",children:[Object(j.jsx)("h2",{children:"Your Orders"}),0===a.length?Object(j.jsx)("div",{className:"empty-state",children:Object(j.jsx)("p",{children:"No orders yet. Create your first order above!"})}):Object(j.jsx)("div",{className:"orders-list",children:a.map(e=>Object(j.jsxs)("div",{className:"order-item",children:[Object(j.jsxs)("div",{className:"order-info",children:[Object(j.jsxs)("div",{className:"order-amount",children:["\u20b9",e.spend]}),Object(j.jsx)("div",{className:"order-date",children:new Date(e.order_date).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),Object(j.jsx)("div",{className:"order-status",children:Object(j.jsx)("span",{className:"status-badge",children:"Completed"})})]},e.id))})]})]})]})]})};t(29);var m=e=>{let{user:s,onLogout:t}=e;const[a,r]=Object(c.useState)("query"),[n,l]=Object(c.useState)(""),[i,o]=Object(c.useState)(null),[b,m]=Object(c.useState)(!1),[h,u]=Object(c.useState)([]),[O,x]=Object(c.useState)(""),[p,g]=Object(c.useState)(""),[v,N]=Object(c.useState)("");Object(c.useEffect)(()=>{"campaigns"===a&&y()},[a]);const y=async()=>{try{const e=await d.a.get("/api/admin/campaigns");u(e.data)}catch(e){console.error("Error fetching campaigns:",e)}};return Object(j.jsxs)("div",{className:"admin-dashboard",children:[Object(j.jsx)("header",{className:"admin-header",children:Object(j.jsxs)("div",{className:"header-content",children:[Object(j.jsxs)("div",{className:"user-info",children:[Object(j.jsx)("h1",{children:"Admin Dashboard"}),Object(j.jsxs)("p",{children:["Welcome, ",s.name]})]}),Object(j.jsx)("button",{className:"logout-btn",onClick:t,children:"Logout"})]})}),Object(j.jsxs)("div",{className:"admin-content",children:[Object(j.jsxs)("nav",{className:"tab-navigation",children:[Object(j.jsx)("button",{className:"tab-btn ".concat("query"===a?"active":""),onClick:()=>r("query"),children:"\ud83e\udd16 AI Query"}),Object(j.jsx)("button",{className:"tab-btn ".concat("campaigns"===a?"active":""),onClick:()=>r("campaigns"),children:"\ud83d\udcca Campaign History"}),Object(j.jsx)("button",{className:"tab-btn ".concat("email"===a?"active":""),onClick:()=>r("email"),children:"\ud83d\udce7 Send Emails"})]}),Object(j.jsxs)("div",{className:"tab-content",children:["query"===a&&Object(j.jsxs)("div",{className:"query-section",children:[Object(j.jsxs)("div",{className:"section-header",children:[Object(j.jsx)("h2",{children:"AI-Powered Customer Query"}),Object(j.jsx)("p",{children:"Ask questions about your customers in natural language"})]}),Object(j.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),n.trim()){m(!0);try{const e=await d.a.post("/api/admin/query",{query:n});o(e.data),y()}catch(s){console.error("Error processing query:",s),o({type:"error",message:"Failed to process query. Please try again."})}m(!1)}},className:"query-form",children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"query",children:"Enter your query:"}),Object(j.jsx)("textarea",{id:"query",value:n,onChange:e=>l(e.target.value),placeholder:"e.g., How many users spend more than \u20b910,000 and have less than 3 visits?",rows:"4",required:!0})]}),Object(j.jsx)("button",{type:"submit",disabled:b,className:"query-btn",children:b?"Processing...":"Run Query"})]}),i&&Object(j.jsxs)("div",{className:"query-result",children:[Object(j.jsx)("h3",{children:"Query Result"}),"error"===i.type?Object(j.jsx)("div",{className:"error-message",children:Object(j.jsx)("p",{children:i.message})}):"count"===i.type?Object(j.jsxs)("div",{className:"count-result",children:[Object(j.jsxs)("div",{className:"count-display",children:[Object(j.jsx)("span",{className:"count-number",children:i.count}),Object(j.jsx)("span",{className:"count-label",children:"Users Found"})]}),Object(j.jsx)("p",{children:i.message})]}):Object(j.jsxs)("div",{className:"data-result",children:[Object(j.jsxs)("div",{className:"result-header",children:[Object(j.jsxs)("span",{children:["Found ",i.count," users"]}),i.excel_file&&Object(j.jsx)("button",{onClick:()=>{return e=i.excel_file.split("/")[1].replace(".xlsx",""),void window.open("http://localhost:5002/download-excel/".concat(e),"_blank");var e},className:"download-btn",children:"\ud83d\udcca Download Excel"})]}),i.results.length>0&&Object(j.jsxs)("div",{className:"results-table",children:[Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{children:Object(j.jsx)("tr",{children:Object.keys(i.results[0]).map(e=>Object(j.jsx)("th",{children:e},e))})}),Object(j.jsx)("tbody",{children:i.results.slice(0,10).map((e,s)=>Object(j.jsx)("tr",{children:Object.values(e).map((e,s)=>Object(j.jsx)("td",{children:e},s))},s))})]}),i.results.length>10&&Object(j.jsx)("p",{className:"table-note",children:"Showing first 10 results. Download Excel for complete data."})]})]})]})]}),"campaigns"===a&&Object(j.jsxs)("div",{className:"campaigns-section",children:[Object(j.jsxs)("div",{className:"section-header",children:[Object(j.jsx)("h2",{children:"Campaign History"}),Object(j.jsx)("p",{children:"Your previous AI queries and campaigns"})]}),0===h.length?Object(j.jsx)("div",{className:"empty-state",children:Object(j.jsx)("p",{children:"No campaigns yet. Start by running your first AI query!"})}):Object(j.jsx)("div",{className:"campaigns-list",children:h.map(e=>Object(j.jsxs)("div",{className:"campaign-item",children:[Object(j.jsxs)("div",{className:"campaign-content",children:[Object(j.jsxs)("div",{className:"campaign-query",children:[Object(j.jsx)("h4",{children:"Query:"}),Object(j.jsxs)("p",{children:['"',e.query_text,'"']})]}),e.result_count&&Object(j.jsx)("div",{className:"campaign-result",children:Object(j.jsxs)("span",{className:"result-count",children:[e.result_count," results"]})})]}),Object(j.jsx)("div",{className:"campaign-date",children:new Date(e.created_at).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]},e.id))})]}),"email"===a&&Object(j.jsxs)("div",{className:"email-section",children:[Object(j.jsxs)("div",{className:"section-header",children:[Object(j.jsx)("h2",{children:"Send Bulk Emails"}),Object(j.jsx)("p",{children:"Send personalized emails to multiple customers"})]}),Object(j.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!O.trim())return void alert("Please enter email addresses");const s=O.split(",").map(e=>e.trim()).filter(e=>e);m(!0);try{const e=await d.a.post("/api/send-emails",{emails:s,subject:p,message:v});alert(e.data.message),x(""),g(""),N("")}catch(t){console.error("Error sending emails:",t),alert("Failed to send emails")}m(!1)},className:"email-form",children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"emails",children:"Email Addresses:"}),Object(j.jsx)("textarea",{id:"emails",value:O,onChange:e=>x(e.target.value),placeholder:"Enter email addresses separated by commas",rows:"4",required:!0}),Object(j.jsx)("small",{children:"Separate multiple emails with commas"})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"subject",children:"Subject:"}),Object(j.jsx)("input",{type:"text",id:"subject",value:p,onChange:e=>g(e.target.value),placeholder:"Email subject"})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"message",children:"Message:"}),Object(j.jsx)("textarea",{id:"message",value:v,onChange:e=>N(e.target.value),placeholder:"Email message",rows:"6"})]}),Object(j.jsx)("button",{type:"submit",disabled:b,className:"send-email-btn",children:b?"Sending...":"Send Emails"})]})]})]})]})]})};d.a.defaults.withCredentials=!0;var h=function(){const[e,s]=Object(c.useState)(null),[t,a]=Object(c.useState)(!0);Object(c.useEffect)(()=>{r()},[]);const r=async()=>{try{const e=await d.a.get("/auth/user");s(e.data)}catch(e){console.log("Not authenticated")}a(!1)},n=async()=>{try{await d.a.post("/auth/logout"),s(null)}catch(e){console.error("Logout error:",e)}};return t?Object(j.jsxs)("div",{className:"loading-container",children:[Object(j.jsx)("div",{className:"loading-spinner"}),Object(j.jsx)("p",{children:"Loading..."})]}):Object(j.jsx)(l.a,{children:Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{path:"/login",element:e?Object(j.jsx)(i.a,{to:"/"}):Object(j.jsx)(o,{})}),Object(j.jsx)(i.b,{path:"/",element:e?e.is_admin?Object(j.jsx)(m,{user:e,onLogout:n}):Object(j.jsx)(b,{user:e,onLogout:n}):Object(j.jsx)(i.a,{to:"/login"})})]})})})};n.a.createRoot(document.getElementById("root")).render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(h,{})}))}},[[30,1,2]]]);
//# sourceMappingURL=main.ab453c52.chunk.js.map